name: goals CI/CD
on: workflow_dispatch
jobs:
    Build_and_Test:
        runs-on: ubuntu-latest
        steps:
            - name: checkout code
              uses: actions/checkout@v4
            - name: setup python on the VM
              uses: actions/setup-python@v5
              with:
                python-version: "3.13"
            - name: setup virtual environment
              run: |
                python3 -m venv venvgoalsapp
                source venvgoalsapp/bin/activate
                python3 -m pip install --upgrade pip
            - name: cache dependencies
              uses: actions/cache@v3
              with:
                path: ~/.cache/pip
                key: ${{ runner.os }}-pip-${{ hashFiles('requirements.txt') }}
            - name: install dependencies
              run: pip install -r ./backend/requirements.txt  
            - name: run code
              run: |
                python3 ./backend/app.py &
                pytest -v 
                





