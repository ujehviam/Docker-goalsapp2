services:
  postgresdb:
    image: postgres:16
    volumes:
      - postgresdb:/var/lib/postgresql/data
    env_file:
      - postgres.env
    container_name: postgres-db
    networks:
      - net5-subnet
    

  flask-app:
    build: 
      context: .
      dockerfile: Dockerfile
    image: flaskapp:V5
    container_name: db_app5
    ports:
      - 5043:5000
    volumes:
      - logs:/app/logs
    env_file:
      - flask-app.env
    depends_on:
      - postgresdb
    networks:
      - net5-subnet
  
  flask-app2:
    image: flaskapp:V5   
    container_name: db_app6
    depends_on:
      - postgresdb
      - flask-app
    ports:
      - 5044:5000
      - 5045:5000
    env_file:
      - flask-app.env
    volumes:
      - log:/app/logs
    networks:
      - net5-subnet

volumes:
  postgresdb:
  logs:
  log:

networks:
  net5-subnet:
    name: net5-subnet

